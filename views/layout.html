<!DOCTYPE html>
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="{{=T.accepted_language or 'en'}}"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <!-- www.phpied.com/conditional-comments-block-downloads/ -->
    <!-- Always force latest IE rendering engine
         (even in intranet) & Chrome Frame
         Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge{{=not request.is_local and ',chrome=1' or ''}}">
    <!--  Mobile Viewport Fix
          j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag
          device-width: Occupy full width of the screen in its current orientation
          initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
          user-scalable = yes allows the user to zoom in -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{=response.title or request.application}}</title>
    <!-- http://dev.w3.org/html5/markup/meta.name.html -->
    <meta name="application-name" content="{{=request.application}}">
    <!-- Speaking of Google, don't forget to set your site up:
         http://google.com/webmasters -->
    <meta name="google-site-verification" content="">
    <!-- include stylesheets -->
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/web2py-bootstrap3.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/main.css')}}"/>
    <link href="{{=URL('static','metisMenu/metisMenu.min.css')}}" rel="stylesheet">
    <link rel="stylesheet" href="{{=URL('static','font-awesome/css/font-awesome.css')}}"/>
    <link rel="shortcut icon" href="{{=URL('static','images/favicon.ico')}}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{=URL('static','images/favicon.png')}}">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">

    <!-- All JavaScript at the bottom, except for Modernizr which enables
         HTML5 elements & feature detects -->
    <script src="{{=URL('static','js/modernizr-2.8.3.min.js')}}"></script>
    <!--[if lt IE 9]>
        <script src="{{=URL('static','js/respond-1.4.2.min.js')}}"></script>
        <![endif]-->
    <!-- Favicons -->
    {{include 'web2py_ajax.html'}} <!-- this includes jquery.js, calendar.js/.css and web2py.js -->
    {{block head}}{{end}}
    {{
    # using sidebars need to know what sidebar you want to use
    mc0 = 'col-md-12'
    mc1 = 'col-md-9'
    mc2 = 'col-md-6'
    left_sidebar_enabled = globals().get('left_sidebar_enabled', False)
    right_sidebar_enabled = globals().get('right_sidebar_enabled', False)
    middle_column = {0: mc0, 1: mc1, 2: mc2}[
    (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]
    }}
  </head>
  <body>
    <!--[if lt IE 8]><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p><![endif]-->
    <div id="wrapper">
      <!-- <div class="w2p_flash alert alert-dismissable">{{=response.flash or ''}}</div> -->
      <!-- Navbar ======================================= -->
      <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          {{=response.logo or ''}}
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-top-links navbar-right">
            <!-- dropdown start -->
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-envelope"></i>
              </a>
              <ul class="dropdown-menu dropdown-messages">
                <li>
                  <a href="#">
                    <div>
                      <strong>Abdul Halim</strong>
                      <span class="pull-right text-muted">
                          <em>Yesterday</em>
                      </span>
                    </div>
                    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="#">
                    <div>
                      <strong>Abdul Halim</strong>
                      <span class="pull-right text-muted">
                          <em>Yesterday</em>
                      </span>
                    </div>
                    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                  </a>
              </li>
              <li class="divider"></li>
              <li>
                <a href="#">
                  <div>
                    <strong>Abdul Halim</strong>
                    <span class="pull-right text-muted">
                        <em>Yesterday</em>
                    </span>
                  </div>
                  <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                </a>
              </li>
              <li class="divider"></li>
              <li>
                <a class="text-center" href="#">
                    <strong>Read All Messages</strong>
                    <i class="fa fa-angle-right"></i>
                </a>
              </li>
              </ul>
            </li>
            <!-- dropdown end -->
            <!-- dropdown start -->
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  <i class="fa fa-bell fa-fw"></i>
              </a>
              <ul class="dropdown-menu dropdown-alerts">
                  <li>
                      <a href="#">
                          <div>
                              <i class="fa fa-comment fa-fw"></i> New Comment
                              <span class="pull-right text-muted small">4 minutes ago</span>
                          </div>
                      </a>
                  </li>
                  <li class="divider"></li>
                  <li>
                      <a href="#">
                          <div>
                              <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                              <span class="pull-right text-muted small">12 minutes ago</span>
                          </div>
                      </a>
                  </li>
                  <li class="divider"></li>
                  <li>
                      <a href="#">
                          <div>
                              <i class="fa fa-envelope fa-fw"></i> Message Sent
                              <span class="pull-right text-muted small">4 minutes ago</span>
                          </div>
                      </a>
                  </li>
                  <li class="divider"></li>
                  <li>
                      <a href="#">
                          <div>
                              <i class="fa fa-tasks fa-fw"></i> New Task
                              <span class="pull-right text-muted small">4 minutes ago</span>
                          </div>
                      </a>
                  </li>
                  <li class="divider"></li>
                  <li>
                      <a href="#">
                          <div>
                              <i class="fa fa-upload fa-fw"></i> Server Rebooted
                              <span class="pull-right text-muted small">4 minutes ago</span>
                          </div>
                      </a>
                  </li>
                  <li class="divider"></li>
                  <li>
                      <a class="text-center" href="#">
                          <strong>See All Alerts</strong>
                          <i class="fa fa-angle-right"></i>
                      </a>
                  </li>
              </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- dropdown end -->
            <!-- dropdown start -->
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  <i class="fa fa-user fa-fw"></i>
              </a>
              <ul class="dropdown-menu dropdown-user">
                {{if auth.user:}}
                  <li>
                    <i class="fa fa-user fa-fw"></i> {{="{} {}".format(auth.user['first_name'], auth.user['last_name'])}}
                  </li>
                  <li>
                    <a href="{{=URL('default','user/profile')}}" title="Edit profile"><i class="fa fa-gear fa-fw"></i>Edit Profile</a>
                    <a href="{{=URL('default', 'user/change_password')}}" title="Change Password"><i class="fa fa-gear fa-fw"></i> Change password</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="{{=URL('default','user/logout')}}"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                  </li>
                  {{else:}}
                  <li>
                    <a href="{{=URL('default','user/login')}}" title="Login">
                    <i class="fa fa-sign-in" aria-hidden="true"></i> Login
                    </a>
                  </li>
                  {{pass}}
              </ul>
              <!-- /.dropdown-user -->
            </li>
              <!-- dropdown end -->
          </ul>

          <!-- sidebar -->
          <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
              <ul class="nav" id="side-menu">
                <li class="sidebar-search">
                  <div class="input-group custom-search-form">
                    <input class="form-control" type="text" name="" placeholder="Search...">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button">
                        <i class="fa fa-search"></i>
                      </button>
                    </span>
                  </div>
                </li>
                <li>
                  <a href="{{=URL('default','index')}}">
                    <i class="fa fa-dashboard fa-fw"></i>
                    Dashboard
                  </a>
                </li>
                {{if auth.user:}}
                <li>
                  <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Device Controller<span class="fa arrow"></span></a>
                  {{username = "{}".format(auth.user['username'])}}
                  {{devices = db.executesql("SELECT Device.id, Device.device_name FROM Device INNER JOIN (auth_user INNER JOIN User_Device \
                                ON auth_user.id = User_Device.user_ref_id) ON Device.id = User_Device.device_ref_id \
                                WHERE ((auth_user.username)='{}')".format(username))}}
                  {{if devices:}}
                  <ul class="nav nav-second-level">
                    {{for dev in devices:}}
                    <li>
                      <a href="{{=URL('default','device_controller', args=dev[0])}}">{{=dev[1]}}</a>
                    </li>
                    {{pass}}
                  </ul>
                  {{pass}}
                </li>
                <li>
                  <a href="{{=URL('default','add_new_device')}}"><i class="fa fa-table fa-fw"></i> Add Device</a>
                </li>
                <li>
                  <a href="{{=URL('default','delete_device')}}"><i class="fa fa-table fa-fw"></i> Delete Device</a>
                </li>
                <li>
                  <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Update Device<span class="fa arrow"></span></a>
                  {{if devices:}}
                  <ul class="nav nav-second-level">
                    {{for dev in devices:}}
                    <li>
                      <a href="{{=URL('default','update_device', args=dev[0])}}">{{=dev[1]}}</a>
                    </li>
                    {{pass}}
                  </ul>
                  {{pass}}
                </li>
                {{pass}}
              </ul>
            </div>
          </div>
        </div>
      </nav>
      <div id="page-wrapper">
        {{block page_wrapper}}
        {{end}}
      </div>
      <!-- Masthead ===================================== -->    
      {{block header}}
      {{end}}
      <!-- Main ========================================= -->
      <!-- Begin page content -->
      <div class="container-fluid main-container">
        {{if left_sidebar_enabled:}}
          <div class="col-md-3 left-sidebar">
              {{block left_sidebar}}
              <h3>Left Sidebar</h3>
              <p></p>
              {{end}}
          </div>
        {{pass}}

        <div class="{{=middle_column}}">
          {{block center}}
          {{include}}
          {{end}}
        </div>

        {{if right_sidebar_enabled:}}
          <div class="col-md-3">
              {{block right_sidebar}}
              <h3>Right Sidebar</h3>
              <p></p>
              {{end}}
          </div>
        {{pass}}

      </div>

      {{block footer}} <!-- this is default footer -->      
      <footer class="footer">
        <div class="container-fluid">
          <div class="copyright pull-left">{{=T('Copyright')}} &#169; {{=request.now.year}}</div>
            <div id="poweredBy" class="pull-right">
              {{=T('Powered by')}}
              <a href="https://abdulhalim.pythonanywhere.com/motor/default/index">abdul halim</a>
            </div>
        </div>
      </footer>
      {{end}}
      <!-- The javascript =============================== -->
      <script src="{{=URL('static','js/jquery.js')}}"></script>
      <script src="{{=URL('static','js/bootstrap.min.js')}}"></script>
      <script src="{{=URL('static','js/web2py-bootstrap3.js')}}"></script>
      <script src="{{=URL('static','js/main.js')}}"></script>
      <script src="{{=URL('static','metisMenu/metisMenu.js')}}"></script>
      {{block page_js}}{{end page_js}}
      {{if response.google_analytics_id:}}
      <!-- Analytics ==================================== -->
      <script src="{{=URL('static','js/analytics.min.js')}}"></script>
      <script type="text/javascript">
        analytics.initialize({
        'Google Analytics':{trackingId:'{{=response.google_analytics_id}}'}
        });
      </script>
      {{pass}}
      <!-- Share ============================y============ -->
      <script src="{{=URL('static','js/share.js',vars=dict(static=URL('static','images')))}}"></script>
        
      <!-- Latest compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    </div>
  </body>
</html>
